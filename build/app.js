!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("app",[],t):"object"==typeof exports?exports.app=t():e.app=t()}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";var n,s,o,r,a,d,c,l,u,h,m;Object.defineProperty(t,"__esModule",{value:!0}),i(2),i(3),i(4);var v={selectedItem:null,boxOpened:!1,houseID:null};function E(){r&&(r.width=window.innerWidth,r.height=window.innerHeight),a&&(a.width=window.innerWidth,a.height=window.innerHeight),d&&(d.style.top=window.innerHeight-d.clientHeight)}function f(){o=document.querySelector("video"),v.selectedItem?(n.classList.add("hide"),o.classList.add("hide"),r.classList.remove("hide"),a.contentWindow.postMessage({src:v.selectedItem},window.location.href)):(n.classList.remove("hide"),o.classList.remove("hide"),r.classList.add("hide")),v.boxOpened&&(console.log("I am here"),console.log(s))}window.addEventListener("resize",function(){E()}),window.addEventListener("DOMContentLoaded",function(){n=document.querySelector("a-scene"),s=document.getElementsByClassName("collidable"),r=document.getElementById("overlay"),a=document.getElementById("viewer"),h=document.querySelector("[ar-raycaster]"),m=document.querySelector("#cursor"),d=document.getElementById("carousel-menu"),c=document.getElementById("carousel-prev-button"),u=document.getElementById("carousel-item-button"),l=document.getElementById("carousel-next-button"),n.addEventListener("loaded",function(){}),n.addEventListener("box-opened",function(e){var t=e.detail.id,i=document.getElementById(t+"0-asset");i&&(v.selectedItem=i.getAttribute("src")),v.boxOpened=!0,f()},!1),n.addEventListener("box-closing",function(){v.boxOpened=!1,f()},!1),n.addEventListener("box-id-selected",function(e){var t=e.detail.id;v.houseID=t,console.log("I got the message: "+t)}),n.addEventListener("carousel-item-selected",function(e){var t=e.detail.id,i=document.getElementById(t+"-asset");i&&(v.selectedItem=i.getAttribute("src")),f()},!1),window.addEventListener("message",function(e){"close"===e.data&&(v.selectedItem=null,f())},!1),c.addEventListener("click",function(){n.emit("rotate-carousel",{direction:-1})},!1),u.addEventListener("click",function(){n.emit("select-carousel-item")},!1),l.addEventListener("click",function(){n.emit("rotate-carousel",{direction:1})},!1),h.addEventListener("raycaster-intersection",function(e){console.log("hit one "+e.detail.intersections[0]),m.setAttribute("color","yellow"),m.setAttribute("position",e.detail.intersections[0].point),m.setAttribute("visible","true")}),h.addEventListener("raycaster-intersection-cleared",function(){m.setAttribute("visible","false")}),E()})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=AFRAME.registerComponent("carousel",{schema:{radius:{type:"number",default:1},thickness:{type:"number",default:.25},ringVisible:{type:"boolean",default:!0},itemRadius:{type:"number",default:1}},numChildren:0,interval:0,currentRotation:0,index:0,ringGeometry:null,ringMaterial:null,ringMesh:null,init:function(){this.bindMethods(),this.addEventListeners(),this.createRing(),this.numChildren=this.el.children.length,this.interval=360/this.numChildren},updateAnimation:function(e){var t,i=e.detail.direction,n=this.index+i;n<0?n=this.numChildren-1:n>this.numChildren-1&&(n=0),t=1===i&&(0===n||n>this.index)?this.currentRotation-this.interval:this.currentRotation+this.interval;var s="property: rotation; from: '90 0 "+this.currentRotation+"'; to: '90 0 "+t+"'; dur: 1000; autoplay: true; easing: easeInOutQuad;";this.el.setAttribute("animation__rotation",s),this.el.children[this.index].object3D.scale.divideScalar(1.5),this.el.children[n].object3D.scale.multiplyScalar(1.5),this.index=n},selectItem:function(){var e=this.el.children[this.index];console.log(this.el),this.el.sceneEl.emit("carousel-item-selected",{id:e.id},!1)},bindMethods:function(){this.addEventListeners=this.addEventListeners.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.createRing=this.createRing.bind(this),this.sceneLoaded=this.sceneLoaded.bind(this),this.updateAnimation=this.updateAnimation.bind(this),this.selectItem=this.selectItem.bind(this)},addEventListeners:function(){this.el.sceneEl.addEventListener("loaded",this.sceneLoaded,!1),this.el.sceneEl.addEventListener("rotate-carousel",this.updateAnimation,!1),this.el.sceneEl.addEventListener("select-carousel-item",this.selectItem,!1)},removeEventListeners:function(){this.el.sceneEl.removeEventListener("loaded",this.sceneLoaded,!1),this.el.sceneEl.removeEventListener("rotate-carousel",this.updateAnimation,!1),this.el.sceneEl.removeEventListener("select-carousel-item",this.selectItem,!1)},createRing:function(){this.ringGeometry=new THREE.TorusGeometry(this.data.radius,this.data.thickness,6,40),this.ringMaterial=new THREE.MeshBasicMaterial({visible:this.data.ringVisible,color:255}),this.ringMesh=new THREE.Mesh(this.ringGeometry,this.ringMaterial)},sceneLoaded:function(){for(var e=this.el.object3D.position,t=this.el.children,i=t.length,n=2*Math.PI/i,s=0;s<i;s++){var o=t[s],r=this.data.radius*Math.cos(s*n)+e.x,a=this.data.radius*Math.sin(s*n);o.setAttribute("position",r+" "+a+" 0"),o.setAttribute("rotation","-90 0 0"),o.addEventListener("model-loaded",function(){})}},update:function(e){e&&e.ringVisible&&e.ringVisible!==this.data.ringVisible&&(this.ringMesh.material.visible=this.data.ringVisible)},tick:function(){},remove:function(){this.el.removeObject3D("mesh"),this.removeEventListeners(),this.ringMesh=null,this.ringGeometry.dispose(),this.ringMaterial.dispose()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=AFRAME.registerComponent("look-to-camera",{schema:{},init:function(){},addEventListeners:function(){},removeEventListeners:function(){},bindMethods:function(){},tick:function(){this.el.object3D.lookAt(this.el.sceneEl.camera.position)}})},function(e,t,i){"use strict";var n,s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CLOSED="closed",e.OPENING="opening",e.OPENED="opened",e.CLOSING="closing"}(n||(n={})),function(e){e.OPEN="open",e.OPENED="opened",e.CLOSE="close",e.CLOSED="closed"}(s||(s={})),t.default=AFRAME.registerComponent("box",{schema:{boxID:{type:"string"},link:{type:"string"},shouldOpen:{type:"boolean",default:"true"},target:{type:"selector"}},animationStateService:null,state:null,init:function(){var e,t,i,o,r,a=this;this.bindMethods(),this.addEventListeners(),this.data.counter=0,this.state=n.CLOSED;var d=XState.Machine({id:"box",initial:this.state,states:(e={},e[n.CLOSED]={on:(t={},t[s.OPEN]=n.OPENING,t)},e[n.OPENING]={on:(i={},i[s.OPENED]=n.OPENED,i)},e[n.OPENED]={on:(o={},o[s.CLOSE]=n.CLOSING,o)},e[n.CLOSING]={on:(r={},r[s.CLOSED]=n.CLOSED,r)},e)});this.animationStateService=XState.interpret(d).onTransition(function(e){return a.animationStateChanged(e.value)}).start()},getAnimationString:function(e,t,i,n){return"property: "+e+"; from: "+t+"; to: "+i+"; dur: "+n+"; loop: once; autoplay: true;"},animationStateChanged:function(e){switch(this.state=e,this.state){case n.OPENING:this.el.setAttribute("animation-mixer","clip: opening; clampWhenFinished: true; loop: once;"),this.el.sceneEl.emit("box-opening",this,!1);break;case n.CLOSING:this.el.setAttribute("animation-mixer","clip: closing; clampWhenFinished: true; loop: once;"),this.el.sceneEl.emit("box-closing",this,!1)}},animationFinished:function(){switch(this.state){case n.OPENING:this.animationStateService.send(s.OPENED),this.el.sceneEl.emit("box-opened",{id:this.data.boxID},!1),this.el.sceneEl.emit("box-id-selected",{id:this.data.boxID},!1);break;case n.CLOSING:this.animationStateService.send(s.CLOSED),this.el.sceneEl.emit("box-closed",this,!1)}},clicked:function(e){switch(e.preventDefault(),console.log("clicked: "+this.data.boxID),this.state){case n.CLOSED:this.animationStateService.send(s.OPEN);break;case n.OPENED:this.animationStateService.send(s.CLOSE)}},addEventListeners:function(){this.el.addEventListener("animation-finished",this.animationFinished,!1),this.el.addEventListener("click",this.clicked,!1)},removeEventListeners:function(){this.el.removeEventListener("animation-finished",this.animationFinished,!1),this.el.removeEventListener("click",this.clicked,!1)},bindMethods:function(){this.addEventListeners=this.addEventListeners.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.animationStateChanged=this.animationStateChanged.bind(this),this.animationFinished=this.animationFinished.bind(this),this.clicked=this.clicked.bind(this)},tick:function(){},remove:function(){this.el.removeObject3D("mesh"),this.removeEventListeners()}})}])});