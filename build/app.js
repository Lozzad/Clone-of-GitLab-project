!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("app",[],t):"object"==typeof exports?exports.app=t():e.app=t()}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";var n,s,o,a,r,l,c,d;Object.defineProperty(t,"__esModule",{value:!0}),i(2),i(3),i(4);var u={selectedItem:null,boxOpened:!1};function h(){o&&(o.width=window.innerWidth,o.height=window.innerHeight),a&&(a.width=window.innerWidth,a.height=window.innerHeight),r&&(r.style.top=window.innerHeight-r.clientHeight)}function m(){s=document.querySelector("video"),u.selectedItem?(n.classList.add("hide"),s.classList.add("hide"),o.classList.remove("hide"),a.contentWindow.postMessage({src:u.selectedItem},window.location.href)):(n.classList.remove("hide"),s.classList.remove("hide"),o.classList.add("hide")),u.boxOpened?r.classList.remove("hide"):r.classList.add("hide")}window.addEventListener("resize",function(){h()}),window.addEventListener("DOMContentLoaded",function(){n=document.querySelector("a-scene"),o=document.getElementById("overlay"),a=document.getElementById("viewer"),r=document.getElementById("carousel-menu"),l=document.getElementById("carousel-prev-button"),d=document.getElementById("carousel-item-button"),c=document.getElementById("carousel-next-button"),n.addEventListener("loaded",function(){}),n.addEventListener("box-opened",function(){u.boxOpened=!0,m()},!1),n.addEventListener("box-closing",function(){u.boxOpened=!1,m()},!1),n.addEventListener("carousel-item-selected",function(e){var t=e.detail.id,i=document.getElementById(t+"-asset");i&&(u.selectedItem=i.getAttribute("src")),m()},!1),window.addEventListener("message",function(e){"close"===e.data&&(u.selectedItem=null,m())},!1),l.addEventListener("click",function(){n.emit("rotate-carousel",{direction:-1})},!1),d.addEventListener("click",function(){n.emit("select-carousel-item")},!1),c.addEventListener("click",function(){n.emit("rotate-carousel",{direction:1})},!1),h()})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=AFRAME.registerComponent("carousel",{schema:{radius:{type:"number",default:1},thickness:{type:"number",default:.25},ringVisible:{type:"boolean",default:!0},itemRadius:{type:"number",default:1}},numChildren:0,interval:0,currentRotation:0,index:0,ringGeometry:null,ringMaterial:null,ringMesh:null,init:function(){this.bindMethods(),this.addEventListeners(),this.createRing(),this.numChildren=this.el.children.length,this.interval=360/this.numChildren},updateAnimation:function(e){var t,i=e.detail.direction,n=this.index+i;n<0?n=this.numChildren-1:n>this.numChildren-1&&(n=0),t=1===i&&(0===n||n>this.index)?this.currentRotation-this.interval:this.currentRotation+this.interval;var s="property: rotation; from: '90 0 "+this.currentRotation+"'; to: '90 0 "+t+"'; dur: 1000; autoplay: true; easing: easeInOutQuad;";this.el.setAttribute("animation__rotation",s),this.el.children[this.index].object3D.scale.divideScalar(1.5),this.el.children[n].object3D.scale.multiplyScalar(1.5),this.currentRotation=t,this.index=n},selectItem:function(){var e=this.el.children[this.index];this.el.sceneEl.emit("carousel-item-selected",{id:e.id},!1)},bindMethods:function(){this.addEventListeners=this.addEventListeners.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.createRing=this.createRing.bind(this),this.sceneLoaded=this.sceneLoaded.bind(this),this.updateAnimation=this.updateAnimation.bind(this),this.selectItem=this.selectItem.bind(this)},addEventListeners:function(){this.el.sceneEl.addEventListener("loaded",this.sceneLoaded,!1),this.el.sceneEl.addEventListener("rotate-carousel",this.updateAnimation,!1),this.el.sceneEl.addEventListener("select-carousel-item",this.selectItem,!1)},removeEventListeners:function(){this.el.sceneEl.removeEventListener("loaded",this.sceneLoaded,!1),this.el.sceneEl.removeEventListener("rotate-carousel",this.updateAnimation,!1),this.el.sceneEl.removeEventListener("select-carousel-item",this.selectItem,!1)},createRing:function(){this.ringGeometry=new THREE.TorusGeometry(this.data.radius,this.data.thickness,6,40),this.ringMaterial=new THREE.MeshBasicMaterial({visible:this.data.ringVisible,color:255}),this.ringMesh=new THREE.Mesh(this.ringGeometry,this.ringMaterial)},sceneLoaded:function(){for(var e=this.el.object3D.position,t=this.el.children,i=t.length,n=2*Math.PI/i,s=0;s<i;s++){var o=t[s],a=this.data.radius*Math.cos(s*n)+e.x,r=this.data.radius*Math.sin(s*n);o.setAttribute("position",a+" "+r+" 0"),o.setAttribute("rotation","-90 0 0"),o.addEventListener("model-loaded",function(){})}},update:function(e){e&&e.ringVisible&&e.ringVisible!==this.data.ringVisible&&(this.ringMesh.material.visible=this.data.ringVisible)},tick:function(){},remove:function(){this.el.removeObject3D("mesh"),this.removeEventListeners(),this.ringMesh=null,this.ringGeometry.dispose(),this.ringMaterial.dispose()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=AFRAME.registerComponent("look-to-camera",{schema:{},init:function(){},addEventListeners:function(){},removeEventListeners:function(){},bindMethods:function(){},tick:function(){this.el.object3D.lookAt(this.el.sceneEl.camera.position)}})},function(e,t,i){"use strict";var n,s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CLOSED="closed",e.OPENING="opening",e.OPENED="opened",e.CLOSING="closing"}(n||(n={})),function(e){e.OPEN="open",e.OPENED="opened",e.CLOSE="close",e.CLOSED="closed"}(s||(s={})),t.default=AFRAME.registerComponent("box",{schema:{carouselId:{type:"string"},carouselAnimationDuration:{type:"string",default:"2000"},carouselScaleSmall:{type:"string",default:"0.25 0.25 0.25"},carouselPositionSmall:{type:"string",default:"0 5 -0.25"},carouselScaleLarge:{type:"string",default:"20 20 20"},carouselPositionLarge:{type:"string",default:"0 10 -0.25"}},carousel:null,animationStateService:null,carouselPositionLargeToSmallAnimation:null,carouselPositionSmallToLargeAnimation:null,carouselScaleLargeToSmallAnimation:null,carouselScaleSmallToLargeAnimation:null,state:null,init:function(){var e,t,i,o,a,r=this;this.bindMethods(),this.addEventListeners(),this.carousel=document.getElementById(this.data.carouselId),this.state=n.CLOSED,this.carouselScaleSmallToLargeAnimation=this.getAnimationString("scale",this.data.carouselScaleSmall,this.data.carouselScaleLarge,this.data.carouselAnimationDuration),this.carouselScaleLargeToSmallAnimation=this.getAnimationString("scale",this.data.carouselScaleLarge,this.data.carouselScaleSmall,this.data.carouselAnimationDuration),this.carouselPositionSmallToLargeAnimation=this.getAnimationString("position",this.data.carouselPositionSmall,this.data.carouselPositionLarge,this.data.carouselAnimationDuration),this.carouselPositionLargeToSmallAnimation=this.getAnimationString("position",this.data.carouselPositionLarge,this.data.carouselPositionSmall,this.data.carouselAnimationDuration);var l=XState.Machine({id:"box",initial:this.state,states:(e={},e[n.CLOSED]={on:(t={},t[s.OPEN]=n.OPENING,t)},e[n.OPENING]={on:(i={},i[s.OPENED]=n.OPENED,i)},e[n.OPENED]={on:(o={},o[s.CLOSE]=n.CLOSING,o)},e[n.CLOSING]={on:(a={},a[s.CLOSED]=n.CLOSED,a)},e)});this.animationStateService=XState.interpret(l).onTransition(function(e){return r.animationStateChanged(e.value)}).start()},getAnimationString:function(e,t,i,n){return"property: "+e+"; from: "+t+"; to: "+i+"; dur: "+n+"; loop: once; autoplay: true;"},animationStateChanged:function(e){switch(this.state=e,this.state){case n.OPENING:this.el.setAttribute("animation-mixer","clip: opening; clampWhenFinished: true; loop: once;"),this.carousel.setAttribute("animation__scale",this.carouselScaleSmallToLargeAnimation),this.carousel.setAttribute("animation__position",this.carouselPositionSmallToLargeAnimation),this.el.sceneEl.emit("box-opening",this,!1);break;case n.CLOSING:this.el.setAttribute("animation-mixer","clip: closing; clampWhenFinished: true; loop: once;"),this.carousel.setAttribute("animation__scale",this.carouselScaleLargeToSmallAnimation),this.carousel.setAttribute("animation__position",this.carouselPositionLargeToSmallAnimation),this.el.sceneEl.emit("box-closing",this,!1)}},animationFinished:function(){switch(this.state){case n.OPENING:this.animationStateService.send(s.OPENED),this.el.sceneEl.emit("box-opened",this,!1);break;case n.CLOSING:this.animationStateService.send(s.CLOSED),this.el.sceneEl.emit("box-closed",this,!1)}},clicked:function(e){switch(e.preventDefault(),console.log("clicked"),this.state){case n.CLOSED:this.animationStateService.send(s.OPEN);break;case n.OPENED:this.animationStateService.send(s.CLOSE)}},addEventListeners:function(){this.el.addEventListener("animation-finished",this.animationFinished,!1),this.el.addEventListener("click",this.clicked,!1)},removeEventListeners:function(){this.el.removeEventListener("animation-finished",this.animationFinished,!1),this.el.removeEventListener("click",this.clicked,!1)},bindMethods:function(){this.addEventListeners=this.addEventListeners.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.animationStateChanged=this.animationStateChanged.bind(this),this.animationFinished=this.animationFinished.bind(this),this.clicked=this.clicked.bind(this)},tick:function(){},remove:function(){this.el.removeObject3D("mesh"),this.removeEventListeners()}})}])});