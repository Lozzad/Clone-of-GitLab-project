<html>
  <head>
    <title>place-based narratives</title>
    <script src="https://aframe.io/releases/0.9.1/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.2/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v6.0.0/dist/aframe-extras.js"></script>
    <script src="https://unpkg.com/xstate@4.5.0/dist/xstate.js"></script>
    <script src="/build/app.js"></script>

		<link rel="stylesheet" href="/styles.css">

    <style>

      #carousel-menu {
        position: absolute;
        -ms-box-orient: horizontal;
        display: -webkit-box;
        display: -moz-box;
        display: -ms-flexbox;
        display: -moz-flex;
        display: -webkit-flex;
        display: flex;

        -webkit-justify-content: space-around;
        justify-content: space-around;
        -webkit-flex-flow: row wrap;
        flex-flow: row wrap;
        -webkit-align-items: stretch;
        align-items: stretch;

        left: 0;
        width: 100%;
      }

      #carousel-menu .col.prev {
        flex-grow: 0;
      }

      #carousel-menu .col.item {
        flex-grow: 1;
        text-align: center;
      }

      #carousel-menu .col.next {
        flex-grow: 0;
      }

      #prev-button {
        float: left;
      }

      #overlay {
        position: absolute;
        background: #000;
        top: 0;
        right: 0;
			}

			.a-loader-title {
				/*display: none !important;*/
				font-family: sans-serif;
				color: #fff;
				background: #000;
			}
    </style>
  </head>

  <body id="body">
    <a-scene
      embedded
      arjs="patternRatio: 0.6; sourceType: webcam; debugUIEnabled: false;"
      vr-mode-ui="enabled: false"
			renderer="colorManagement: true; logarithmicDepthBuffer: true;"
      loading-screen="dotsColor: white; backgroundColor: black"
      stats
    >
      <a-assets>
        <!-- <a-asset-item id="house-asset" src="assets/house.gltf"></a-asset-item> -->
        <a-asset-item id="af-asset" src="assets/af.gltf"></asset-item>
        <a-asset-item id="af2-asset" src="assets/af2.gltf"></asset-item>
        <a-asset-item id="ag-asset" src="assets/ag.gltf"></asset-item>
        <a-asset-item id="ah-asset" src="assets/ah.gltf"></asset-item>
        <a-asset-item id="alice-asset" src="assets/alice.gltf"></asset-item>
        <a-asset-item id="aw-asset" src="assets/aw.gltf"></asset-item>
        <a-asset-item id="bg-asset" src="assets/bg.gltf"></asset-item>
        <a-asset-item id="cha-asset" src="assets/cha.gltf"></a-asset-item>
        <a-asset-item id="ct-asset" src="assets/ct.gltf"></a-asset-item>
        <a-asset-item id="dls-asset" src="assets/dls.gltf"></a-asset-item>
        <a-asset-item id="eb-asset" src="assets/eb.gltf"></a-asset-item>
        <a-asset-item id="ef-asset" src="assets/ef.gltf"></a-asset-item>
        <a-asset-item id="fc-asset" src="assets/fc.gltf"></a-asset-item>
        <a-asset-item id="fh-asset" src="assets/fh.gltf"></a-asset-item>
        <a-asset-item id="fs-asset" src="assets/fs.gltf"></a-asset-item>
        <a-asset-item id="ga-asset" src="assets/ga.gltf"></a-asset-item>
        <a-asset-item id="jd-asset" src="assets/jd.gltf"></a-asset-item>
        <a-asset-item id="lb-asset" src="assets/lb.gltf"></a-asset-item>
        <a-asset-item id="lk-asset" src="assets/lk.gltf"></a-asset-item>
        <a-asset-item id="lp-asset" src="assets/lp.gltf"></a-asset-item>
        <a-asset-item id="ls-asset" src="assets/ls.gltf"></a-asset-item>
        <a-asset-item id="lt-asset" src="assets/lt.gltf"></a-asset-item>
        <a-asset-item id="ma-asset" src="assets/ma.gltf"></a-asset-item>
        <a-asset-item id="md-asset" src="assets/md.gltf"></a-asset-item>
        <a-asset-item id="nl-asset" src="assets/nl.gltf"></a-asset-item>
        <a-asset-item id="ollie-asset" src="assets/ollie.gltf"></a-asset-item>
        <a-asset-item id="pb-asset" src="assets/pb.gltf"></a-asset-item>
        <a-asset-item id="rc-asset" src="assets/rc.gltf"></a-asset-item>
        <a-asset-item id="rmj-asset" src="assets/rmj.gltf"></a-asset-item>
        <a-asset-item id="rw-asset" src="assets/rw.gltf"></a-asset-item>
        <a-asset-item id="ss-asset" src="assets/ss.gltf"></a-asset-item>
        <a-asset-item id="za-asset" src="assets/za.gltf"></a-asset-item>
        <a-asset-item
          id="letter-asset"
          src="https://pbn.netlify.com/assets/letter.gltf"
        ></a-asset-item>
        <a-asset-item
          id="cat-sitting-asset"
          src="https://pbn.netlify.com/assets/cat-sitting.gltf"
        ></a-asset-item>
        <a-asset-item
          id="cat-walking-asset"
          src="https://pbn.netlify.com/assets/cat-walking.gltf"
        ></a-asset-item>
        <!-- <a-asset-item
          id="man-asset"
          src="https://pbn.netlify.com/assets/man.gltf"
        ></a-asset-item>-->
        <a-asset-item
          id="signpost-asset"
          src="https://pbn.netlify.com/assets/signpost.gltf"
        ></a-asset-item>
        <a-asset-item id="speech-bubble" src=""></a-asset-item>
      </a-assets>

      <a-entity camera>
        <a-entity
          raycaster="objects: .collidable"
          cursor="fuse: false; rayOrigin: mouse"
        >
        </a-entity>
      </a-entity>

      <a-marker type="pattern" url="assets/markers/marker.patt">
        <a-light
          type="ambient"
          color="#fff"
          position="0 1 0"
          intensity="1"
        ></a-light>

        <a-light
          type="ambient"
          color="#fff"
          position="4 2 2"
          intensity="1"
        ></a-light>

        <a-light
          type="spot"
          position="10 10 10"
          rotation="0 0 0"
          intensity="1"
        ></a-light>

       

        <!-- <a-entity
          position="-1 0 -0.25"
          scale="4 4 4"
          gltf-model="#man-asset"
        >
        </a-entity>

        <a-entity
          position="1 0 -0.25"
          scale="4 4 4"
          gltf-model="#signpost-asset"
        >
        </a-entity>


        <a-entity
          rotation="90 0 90"
          id="carousel"
          position="0 0.9 -0.25"
          scale="0.25 0.25 0.25"
        >
          <a-entity
            carousel="radius: 0.4; thickness: 0.01; ringVisible: true; itemRadius: 0.1;"
          >
            animation="property: rotation; from: '90 0 0'; to: '90 0 360'; dur: 30000; loop: true; easing: linear; autoplay: true;"
						<a-entity
							id="letter"
							gltf-model="#letter-asset"
							scale="1.2 1.2 1.2"
						>
            </a-entity>
            <a-entity
              id="cat-walking"
							gltf-model="#cat-walking-asset"
							scale="1.2 1.2 1.2"
            >
            </a-entity>
            <a-entity
              id="cat-sitting"
							gltf-model="#cat-sitting-asset"
							scale="1.2 1.2 1.2"
            >
						</a-entity>
						<a-entity
              id="signpost"
							gltf-model="#signpost-asset"
							scale="3 3 3"
            >
            </a-entity>
          </a-entity>
        </a-entity> -->

      </a-marker>
    </a-scene>

    <div id="carousel-menu" class="hide">
      <div class="col prev">
        <button id="carousel-prev-button">&lt;</button>
      </div>
      <div class="col item">
        <button id="carousel-item-button">View</button>
      </div>
      <div class="col next">
        <button id="carousel-next-button">&gt;</button>
      </div>
    </div>

    <div id="overlay" class="hide">
      <iframe id="viewer" src="/viewer.html" frameborder="0"></iframe>
    </div>

    <footer>
      <script type="text/javascript">
        function addEntity(nameEntity, rotYEntity=0, posXEntity=0, posZEntity=0, scaleEntity=0.05){
          var marker = document.querySelector("a-marker");
          var entity = document.createElement("a-entity");

          entity.setAttribute('id', 'nameEntity');
          entity.setAttribute('position', {x: posXEntity, y: 0, z: posZEntity});
          entity.setAttribute('rotation', {x: 0, y: rotYEntity, z: 0});
          entity.setAttribute('scale', {x: scaleEntity, y: scaleEntity, z: scaleEntity});
          entity.setAttribute('gltf-model', '#' + nameEntity + '-asset');
          entity.setAttribute('class', 'collidable');
          entity.setAttribute('animation-mixer', {clip: 'closed'});
          entity.setAttribute('box', {carouselId: 'carousel'});

          marker.appendChild(entity);
        };
        addEntity('cha', -90, -2, 0);
        addEntity('af', -90, -2, 1);
        addEntity('af2', -90, -2, 2);
        addEntity('ag', -90, -2, 3);
        addEntity('ah', -90, -2, 4);
        addEntity('alice', -90, -2, 5);
        addEntity('bg', -90, -1, 0);
        addEntity('ct', -90, -1, 1);
        addEntity('dls', -90, -1, 2);
        addEntity('eb', -90, -1, 3);
        addEntity('fc', -90, -1, 4);
        addEntity('fh', -90, -1, 5);
        addEntity('fs', -90, 0, 0);
        addEntity('ga', -90, 0, 1);
        addEntity('jd', -90, 0, 2);
        addEntity('lb', -90, 0, 3);
        addEntity('lk', -90, 0, 4);
        addEntity('lp', -90, 0, 5);
        addEntity('ls', -90, 1, 0);
        addEntity('lt', -90, 1, 1);
        addEntity('ma', -90, 1, 2);
        addEntity('md', -90, 1, 3);
        addEntity('nl', -90, 1, 4);
        addEntity('ollie', -90, 1, 5);
        addEntity('pb', -90, 2, 0);
        addEntity('rc', -90, 2, 1);
        addEntity('rmj', -90, 2, 2);
        addEntity('rw', -90, 2, 3);
        addEntity('ss', -90, 2, 4);
        addEntity('za', -90, 2, 5);
        addEntity('aw', -90, 3, 0);
        addEntity('ef', -90, 3, 1);






      </script>
    </footer>
  </body>
</html>
